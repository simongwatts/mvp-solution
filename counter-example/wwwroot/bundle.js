(()=>{"use strict";class t{}class e extends t{}class s{}class n extends s{}class i extends s{}class c extends t{constructor(t){super(),this.newCount=t}}class o{constructor(t,e,s){this.view=t,this.model=e,this.eventBus=s,this.subscriptions=[],this.initialize()}initialize(){this.subscribe(n,(t=>this.onViewEvent(t))),this.subscribe(e,(t=>this.onModelEvent(t)))}onViewEvent(t){}onModelEvent(t){}subscribe(t,e){this.subscriptions.push(this.eventBus.subscribe(t,e))}dispose(){this.subscriptions.forEach((t=>t())),this.subscriptions=[]}}const u=new class{constructor(){this.subscriptions=new Map}publish(t){this.getEventTypeHierarchy(t).forEach((e=>{(this.subscriptions.get(e)||new Set).forEach((e=>e(t)))}))}subscribe(t,e){const s=t.name,n=this.subscriptions.get(s)||new Set;return n.add(e),this.subscriptions.set(s,n),()=>this.unsubscribe(s,e)}unsubscribe(t,e){const s=this.subscriptions.get(t);s&&(s.delete(e),0===s.size&&this.subscriptions.delete(t))}getEventTypeHierarchy(t){const e=[];let s=Object.getPrototypeOf(t);for(;null!==s;){const t=s.constructor.name;"Object"!==t&&(e.push(t),e.push(...this.getBaseTypes(s))),s=Object.getPrototypeOf(s)}return[...new Set(e)]}getBaseTypes(t){const e=[];let s=Object.getPrototypeOf(t);for(;s&&s!==Object.prototype;){const t=s.constructor.name;"Object"!==t&&e.push(t),s=Object.getPrototypeOf(s)}return e}},r=new class{constructor(t){this.eventBus=t,this.countElement=document.getElementById("count"),this.incrementButton=document.createElement("button"),this.incrementButton.textContent="Increment",this.incrementButton.addEventListener("click",(()=>{this.eventBus.publish(new i)})),document.body.append(this.countElement,this.incrementButton)}updateCount(t){this.countElement.textContent=t.toString()}}(u),h=new class{constructor(t){this.eventBus=t,this.count=0}increment(){this.count++,this.eventBus.publish(new c(this.count))}}(u);new class extends o{constructor(t,e,s){super(t,e,s)}onViewEvent(t){t instanceof i&&this.model.increment()}onModelEvent(t){t instanceof c&&this.view.updateCount(t.newCount)}}(r,h,u)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEwQixJQUV4RDhDLFNBQVNNLEtBQUtDLE9BQU9oRCxLQUFLd0MsYUFBY3hDLEtBQUsyQyxnQkFDakQsQ0FDQSxXQUFBTSxDQUFZQyxHQUNSbEQsS0FBS3dDLGFBQWFLLFlBQWNLLEVBQU1DLFVBQzFDLEdGUnlCL0MsR0FDdkJELEVBQVEsSUdOUCxNQUNILFdBQUFOLENBQVlPLEdBQ1JKLEtBQUtJLFNBQVdBLEVBQ2hCSixLQUFLa0QsTUFBUSxDQUNqQixDQUNBLFNBQUFFLEdBQ0lwRCxLQUFLa0QsUUFDTGxELEtBQUtJLFNBQVNlLFFBQVEsSUFBSXZCLEVBQW9CSSxLQUFLa0QsT0FDdkQsR0hGMkI5QyxHQUMvQixJSUxPLGNBQStCSCxFQUNsQyxXQUFBSixDQUFZSyxFQUFNQyxFQUFPQyxHQUNyQkwsTUFBTUcsRUFBTUMsRUFBT0MsRUFDdkIsQ0FFQSxXQUFBSyxDQUFZRSxHQUNKQSxhQUFpQmhCLEdBQ2pCSyxLQUFLRyxNQUFNaUQsV0FFbkIsQ0FFQSxZQUFBMUMsQ0FBYUMsR0FDTEEsYUFBaUJmLEdBQ2pCSSxLQUFLRSxLQUFLK0MsWUFBWXRDLEVBQU1iLFNBRXBDLEdKVmlCSSxFQUFNQyxFQUFPQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY291bnRlci1leGFtcGxlLy4uL212cC1jb3JlL3NyYy9ldmVudHMvTW9kZWxFdmVudC50cyIsIndlYnBhY2s6Ly9jb3VudGVyLWV4YW1wbGUvLi4vbXZwLWNvcmUvc3JjL2V2ZW50cy9WaWV3RXZlbnQudHMiLCJ3ZWJwYWNrOi8vY291bnRlci1leGFtcGxlLy4vc3JjL2V2ZW50cy9Db3VudGVyRXZlbnRzLnRzIiwid2VicGFjazovL2NvdW50ZXItZXhhbXBsZS8uLi9tdnAtY29yZS9zcmMvcHJlc2VudGVycy9QcmVzZW50ZXJCYXNlLnRzIiwid2VicGFjazovL2NvdW50ZXItZXhhbXBsZS8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vY291bnRlci1leGFtcGxlLy4uL212cC1jb3JlL3NyYy9ldmVudHMvRXZlbnRBZ2dyZWdhdG9yLnRzIiwid2VicGFjazovL2NvdW50ZXItZXhhbXBsZS8uL3NyYy92aWV3cy9Db3VudGVyVmlldy50cyIsIndlYnBhY2s6Ly9jb3VudGVyLWV4YW1wbGUvLi9zcmMvbW9kZWxzL0NvdW50ZXJNb2RlbC50cyIsIndlYnBhY2s6Ly9jb3VudGVyLWV4YW1wbGUvLi9zcmMvcHJlc2VudGVycy9Db3VudGVyUHJlc2VudGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEJhc2UgY2xhc3MgZm9yIGFsbCBtb2RlbCBldmVudHNcbmV4cG9ydCBjbGFzcyBNb2RlbEV2ZW50IHtcbn1cbmV4cG9ydCBjbGFzcyBCYXNlTW9kZWxFdmVudCBleHRlbmRzIE1vZGVsRXZlbnQge1xufVxuIiwiLy8gQmFzZSBjbGFzcyBmb3IgYWxsIHZpZXcgZXZlbnRzXG5leHBvcnQgY2xhc3MgVmlld0V2ZW50IHtcbn1cbmV4cG9ydCBjbGFzcyBCYXNlVmlld0V2ZW50IGV4dGVuZHMgVmlld0V2ZW50IHtcbn1cbiIsImltcG9ydCB7IE1vZGVsRXZlbnQgfSBmcm9tIFwibXZwLWNvcmUvZXZlbnRzL01vZGVsRXZlbnRcIjtcbmltcG9ydCB7IFZpZXdFdmVudCB9IGZyb20gXCJtdnAtY29yZS9ldmVudHMvVmlld0V2ZW50XCI7XG5leHBvcnQgY2xhc3MgSW5jcmVtZW50UmVxdWVzdGVkRXZlbnQgZXh0ZW5kcyBWaWV3RXZlbnQge1xufVxuZXhwb3J0IGNsYXNzIENvdW50ZXJVcGRhdGVkRXZlbnQgZXh0ZW5kcyBNb2RlbEV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihuZXdDb3VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm5ld0NvdW50ID0gbmV3Q291bnQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQmFzZU1vZGVsRXZlbnQgfSBmcm9tIFwiLi4vZXZlbnRzL01vZGVsRXZlbnRcIjtcbmltcG9ydCB7IEJhc2VWaWV3RXZlbnQgfSBmcm9tIFwiLi4vZXZlbnRzL1ZpZXdFdmVudFwiO1xuZXhwb3J0IGNsYXNzIFByZXNlbnRlckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIG1vZGVsLCBldmVudEJ1cykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMgPSBldmVudEJ1cztcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgICBpbml0aWFsaXplKCkge1xuICAgICAgICAvLyBTdWJzY3JpYmUgdG8gY29uY3JldGUgYmFzZSBldmVudHNcbiAgICAgICAgdGhpcy5zdWJzY3JpYmUoQmFzZVZpZXdFdmVudCwgZSA9PiB0aGlzLm9uVmlld0V2ZW50KGUpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmUoQmFzZU1vZGVsRXZlbnQsIGUgPT4gdGhpcy5vbk1vZGVsRXZlbnQoZSkpO1xuICAgIH1cbiAgICBvblZpZXdFdmVudChldmVudCkgeyB9XG4gICAgb25Nb2RlbEV2ZW50KGV2ZW50KSB7IH1cbiAgICBzdWJzY3JpYmUoZXZlbnRUeXBlLCBoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHRoaXMuZXZlbnRCdXMuc3Vic2NyaWJlKGV2ZW50VHlwZSwgaGFuZGxlcikpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCh1bnN1YnNjcmliZSA9PiB1bnN1YnNjcmliZSgpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRXZlbnRBZ2dyZWdhdG9yIH0gZnJvbSBcIm12cC1jb3JlL2V2ZW50cy9FdmVudEFnZ3JlZ2F0b3JcIjtcbmltcG9ydCB7IENvdW50ZXJNb2RlbCB9IGZyb20gXCIuL21vZGVscy9Db3VudGVyTW9kZWxcIjtcbmltcG9ydCB7IENvdW50ZXJWaWV3IH0gZnJvbSBcIi4vdmlld3MvQ291bnRlclZpZXdcIjtcbmltcG9ydCB7IENvdW50ZXJQcmVzZW50ZXIgfSBmcm9tIFwiLi9wcmVzZW50ZXJzL0NvdW50ZXJQcmVzZW50ZXJcIjtcbi8vIEluaXRpYWxpemUgY29tcG9uZW50c1xuY29uc3QgZXZlbnRCdXMgPSBuZXcgRXZlbnRBZ2dyZWdhdG9yKCk7XG5jb25zdCB2aWV3ID0gbmV3IENvdW50ZXJWaWV3KGV2ZW50QnVzKTtcbmNvbnN0IG1vZGVsID0gbmV3IENvdW50ZXJNb2RlbChldmVudEJ1cyk7XG5uZXcgQ291bnRlclByZXNlbnRlcih2aWV3LCBtb2RlbCwgZXZlbnRCdXMpO1xuIiwiZXhwb3J0IGNsYXNzIEV2ZW50QWdncmVnYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgcHVibGlzaChldmVudCkge1xuICAgICAgICBjb25zdCBldmVudFR5cGVzID0gdGhpcy5nZXRFdmVudFR5cGVIaWVyYXJjaHkoZXZlbnQpO1xuICAgICAgICBldmVudFR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuc3Vic2NyaXB0aW9ucy5nZXQodHlwZSkgfHwgbmV3IFNldCgpO1xuICAgICAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChoYW5kbGVyID0+IGhhbmRsZXIoZXZlbnQpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN1YnNjcmliZShldmVudFR5cGUsIGhhbmRsZXIpIHtcbiAgICAgICAgY29uc3QgdHlwZU5hbWUgPSBldmVudFR5cGUubmFtZTtcbiAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLnN1YnNjcmlwdGlvbnMuZ2V0KHR5cGVOYW1lKSB8fCBuZXcgU2V0KCk7XG4gICAgICAgIGhhbmRsZXJzLmFkZChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnNldCh0eXBlTmFtZSwgaGFuZGxlcnMpO1xuICAgICAgICByZXR1cm4gKCkgPT4gdGhpcy51bnN1YnNjcmliZSh0eXBlTmFtZSwgaGFuZGxlcik7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHR5cGVOYW1lLCBoYW5kbGVyKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5zdWJzY3JpcHRpb25zLmdldCh0eXBlTmFtZSk7XG4gICAgICAgIGlmIChoYW5kbGVycykge1xuICAgICAgICAgICAgaGFuZGxlcnMuZGVsZXRlKGhhbmRsZXIpO1xuICAgICAgICAgICAgaWYgKGhhbmRsZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZGVsZXRlKHR5cGVOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRFdmVudFR5cGVIaWVyYXJjaHkoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdHlwZXMgPSBbXTtcbiAgICAgICAgbGV0IGN1cnJlbnRUeXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGV2ZW50KTtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRUeXBlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlTmFtZSA9IGN1cnJlbnRUeXBlLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICBpZiAodHlwZU5hbWUgIT09ICdPYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdHlwZXMucHVzaCh0eXBlTmFtZSk7XG4gICAgICAgICAgICAgICAgdHlwZXMucHVzaCguLi50aGlzLmdldEJhc2VUeXBlcyhjdXJyZW50VHlwZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFR5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3VycmVudFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ubmV3IFNldCh0eXBlcyldO1xuICAgIH1cbiAgICBnZXRCYXNlVHlwZXModHlwZSkge1xuICAgICAgICBjb25zdCBiYXNlcyA9IFtdO1xuICAgICAgICBsZXQgY3VycmVudEJhc2UgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodHlwZSk7XG4gICAgICAgIHdoaWxlIChjdXJyZW50QmFzZSAmJiBjdXJyZW50QmFzZSAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgY29uc3QgYmFzZU5hbWUgPSBjdXJyZW50QmFzZS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgaWYgKGJhc2VOYW1lICE9PSAnT2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGJhc2VzLnB1c2goYmFzZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudEJhc2UgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3VycmVudEJhc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNlcztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJbmNyZW1lbnRSZXF1ZXN0ZWRFdmVudCB9IGZyb20gXCIuLi9ldmVudHMvQ291bnRlckV2ZW50c1wiO1xuZXhwb3J0IGNsYXNzIENvdW50ZXJWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihldmVudEJ1cykge1xuICAgICAgICB0aGlzLmV2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgICAgIHRoaXMuY291bnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvdW50Jyk7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50QnV0dG9uLnRleHRDb250ZW50ID0gJ0luY3JlbWVudCc7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5wdWJsaXNoKG5ldyBJbmNyZW1lbnRSZXF1ZXN0ZWRFdmVudCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRoaXMuY291bnRFbGVtZW50LCB0aGlzLmluY3JlbWVudEJ1dHRvbik7XG4gICAgfVxuICAgIHVwZGF0ZUNvdW50KGNvdW50KSB7XG4gICAgICAgIHRoaXMuY291bnRFbGVtZW50LnRleHRDb250ZW50ID0gY291bnQudG9TdHJpbmcoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb3VudGVyVXBkYXRlZEV2ZW50IH0gZnJvbSBcIi4uL2V2ZW50cy9Db3VudGVyRXZlbnRzXCI7XG5leHBvcnQgY2xhc3MgQ291bnRlck1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihldmVudEJ1cykge1xuICAgICAgICB0aGlzLmV2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cbiAgICBpbmNyZW1lbnQoKSB7XG4gICAgICAgIHRoaXMuY291bnQrKztcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5wdWJsaXNoKG5ldyBDb3VudGVyVXBkYXRlZEV2ZW50KHRoaXMuY291bnQpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQcmVzZW50ZXJCYXNlIH0gZnJvbSBcIm12cC1jb3JlL3ByZXNlbnRlcnMvUHJlc2VudGVyQmFzZVwiO1xuaW1wb3J0IHsgQ291bnRlclVwZGF0ZWRFdmVudCB9IGZyb20gXCIuLi9ldmVudHMvQ291bnRlckV2ZW50c1wiO1xuaW1wb3J0IHsgSW5jcmVtZW50UmVxdWVzdGVkRXZlbnQgfSBmcm9tIFwiLi4vZXZlbnRzL0NvdW50ZXJFdmVudHNcIjtcbmV4cG9ydCBjbGFzcyBDb3VudGVyUHJlc2VudGVyIGV4dGVuZHMgUHJlc2VudGVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IodmlldywgbW9kZWwsIGV2ZW50QnVzKSB7XG4gICAgICAgIHN1cGVyKHZpZXcsIG1vZGVsLCBldmVudEJ1cyk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSB2aWV3IGV2ZW50c1xuICAgIG9uVmlld0V2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEluY3JlbWVudFJlcXVlc3RlZEV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsLmluY3JlbWVudCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEhhbmRsZSBtb2RlbCB1cGRhdGVzXG4gICAgb25Nb2RlbEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIENvdW50ZXJVcGRhdGVkRXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy51cGRhdGVDb3VudChldmVudC5uZXdDb3VudCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTW9kZWxFdmVudCIsIkJhc2VNb2RlbEV2ZW50IiwiVmlld0V2ZW50IiwiQmFzZVZpZXdFdmVudCIsIkluY3JlbWVudFJlcXVlc3RlZEV2ZW50IiwiQ291bnRlclVwZGF0ZWRFdmVudCIsImNvbnN0cnVjdG9yIiwibmV3Q291bnQiLCJzdXBlciIsInRoaXMiLCJQcmVzZW50ZXJCYXNlIiwidmlldyIsIm1vZGVsIiwiZXZlbnRCdXMiLCJzdWJzY3JpcHRpb25zIiwiaW5pdGlhbGl6ZSIsInN1YnNjcmliZSIsImUiLCJvblZpZXdFdmVudCIsIm9uTW9kZWxFdmVudCIsImV2ZW50IiwiZXZlbnRUeXBlIiwiaGFuZGxlciIsInB1c2giLCJkaXNwb3NlIiwiZm9yRWFjaCIsInVuc3Vic2NyaWJlIiwiTWFwIiwicHVibGlzaCIsImdldEV2ZW50VHlwZUhpZXJhcmNoeSIsInR5cGUiLCJnZXQiLCJTZXQiLCJ0eXBlTmFtZSIsIm5hbWUiLCJoYW5kbGVycyIsImFkZCIsInNldCIsImRlbGV0ZSIsInNpemUiLCJ0eXBlcyIsImN1cnJlbnRUeXBlIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRCYXNlVHlwZXMiLCJiYXNlcyIsImN1cnJlbnRCYXNlIiwicHJvdG90eXBlIiwiYmFzZU5hbWUiLCJjb3VudEVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5jcmVtZW50QnV0dG9uIiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJhcHBlbmQiLCJ1cGRhdGVDb3VudCIsImNvdW50IiwidG9TdHJpbmciLCJpbmNyZW1lbnQiXSwic291cmNlUm9vdCI6IiJ9